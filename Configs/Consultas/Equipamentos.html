<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consulta Equipamentos</title>
  <link rel="stylesheet" href="../../sidebars/bootstrap.min.css">
  <link rel="icon" href="../../icons/warning.png" sizes="192x192" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="../lib/stylesheet.css">
  <script src="./../../flowSite/verificaSessao.js"></script>
  <script src="./../../flowSite/verificaPermissao.js"></script>
  <style>
    #cadastro {
      display: none;
    }

    #novo:hover {
      text-decoration: underline;
      cursor: pointer;

    }

    /* Global Styles */
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: white;

      height: 100%;
      margin: 0;
      /* display: flex; */
      /* justify-content: center; */
      /* align-items: center; */

    }

    /* Header Styles */
    .header {
      background-color: #ffffff;
      color: #fff;
      padding: 10px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 25%;
    }

    .back-button {
      color: #000000;
      text-decoration: none;
      margin-right: 10px;
      float: left;
      margin-left: 20px;
    }

    .title {
      margin: auto;
      font-family: Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      padding-top: 2px;
      font-size: 33px;
      color: #000000;
      text-align: start;
      /* padding-left: 20px; */
      flex:none;

    }

    /* Main Content Styles */
    .main-content {
      margin: auto;
      padding: 50px;
      /* padding-left: 100px;
            padding-right: 100px; */
      border-radius: 15px;
      box-shadow: 10px 11px rgba(0, 0, 0, 0.1);
      margin-top: 110px;
      width: 100%;


    }

    h2 {
      margin-top: 0;
      margin-bottom: 20px;
    }

    .add-status-form {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .add-status-form label {
      margin-right: 10px;
    }

    .add-status-form input[type="text"] {
      flex: 1;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .add-status-form button {
      background-color: #00a383;
      color: #fff;
      border: none;
      padding: 8px 15px;
      margin-left: 10px;
      border-radius: 5px;
      cursor: pointer;
    }

    .add-status-form button i {
      margin-right: 5px;
    }

    /* Table Styles */
    table {
      width: 95%;
      border-collapse: collapse;
      margin-bottom: 40px;
      border-radius: 10px;
      overflow: hidden;
      background-color: white;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      margin: auto;
      margin-top: 20px;



    }


    /* NOVOS CSS PUXADOS DO BOOTSTRAP PARA REALIZAR ALTERAÇÃO DIRETAMENTE DA PAGINA */
    .table> :not(caption)>*>* {

      background-color: white;
      border-radius: 10px;


    }

    .table-dark {

      --bs-table-striped-bg: #00a383;
      --bs-table-hover-bg: #00a383;


    }

    /* =========================================================================== */

    .table-heading {
      background: linear-gradient(135deg, #007bff, #00cc99);
      color: #fff;
    }

    .table-heading th {
      padding: 4px;
    }

    table th,
    table td {
      padding: 12px;
      border-bottom: 1px solid #e0e0e0;
    }

    table tr:nth-child(even) {
      background-color: #f2f2f2;
    }

    /* Button Styles */
    button {
      background-color: #00cc99;
            color: #fff;
            border: none;
            /* padding: 10px 15px; */
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
            width: 95%;
            padding-left: 40px;
            padding-right: 40px;
            font-weight: bold;
            /* margin-left: 28vh;  */
            box-shadow: 10px 11px rgba(0, 0, 0, 0.1);
            font-size: 15px;
            padding-top: 10px;
            padding-bottom: 10px;
            margin-top: 30px;
            margin-left: 5vh;

    }

    
    button i {
            margin-right: 5px;
        }

        button:hover {
            background-color: #007bff;
        }

        .custom-confirm-button-class {
            background-color: #00cc99;
        }

        .btn-primary {
          background-color: #00cc99;
          font-weight: 600;
          padding: 8px;
          border-color:#00cc99;
        }



    /* Responsive Design */
    @media screen and (max-width: 768px) {
      .main-content {
        padding: 10px;
      }

      .add-status-form {
        flex-direction: column;

      }

      .add-status-form input[type="text"] {
        width: 100%;
        margin-bottom: 10px;
      }
    }



    .swal-columns {
      display: flex;
      flex-direction: column;
    }

    .swal-columns input {
      margin: 20px 0px;
    }

    tbody,
    td,
    tfoot,
    th,
    thead,
    tr {

      border-color: white;
      border-width: 10px;
    }

    .form-select {

      margin-left: 0px;
    }
  </style>
</head>
<header class="header">

  <a href="../index.html" class="back-button"><i style="font-size: 40px" class="bi-arrow-left-circle bi-lg"></i></a>
  <h1 class="title">CONSULTA EQUIPAMENTOS</h1>

</header>

<body onload="init()">


  <div>
    <button class="btn btn-primary" onclick="window.location.href='../Cadastro/Equipamento.html'">ADICIONAR
      EQUIPAMENTO</button>
  </div>



  <div class="box-sqr" style="margin-top: 0px;" id="cadastrados">
    <table id="tableEquipment" class="table table-striped table-hover">
      <tr class="table table-dark ">
        <th>sti_ID</th>
        <th>Descrição</th>
        <th>IP</th>
        <th>Tipo</th>
        <th>Usuário</th>
        <th>Seção</th>
      </tr>
    </table>
  </div>
  <div class="box-sqr" id="naocadastrados" style="display: none;">

    <table id="tableEquipmentNaoCadastrado" class="table table-striped table-hover">
      <tr class="table table-dark ">
        <th>sti_ID</th>
        <th>Descrição</th>
        <th>IP</th>
        <th>Tipo</th>
        <th>Usuário</th>
        <!-- <th>Seção</th> -->
        <th>Cadastrar</th>
      </tr>
    </table>
  </div>
  <script>
    function init() {
      displayEquipments();
    }
    function cadastrarEquip(equip) {
      // console.log(equip);
      window.location.href = "../Cadastro/Equipamento.html?equip=" + JSON.stringify(equip);
    }

    function unParse(data) {
      var dadosObjeto = JSON.parse(data)
      var tableEquipment = document.getElementById("tableEquipment");
      var tableEquipmentNaoCadastrado = document.getElementById("tableEquipmentNaoCadastrado")
      var equipamentos = dadosObjeto.equipamentos;
      // console.log(dadosObjeto)

      for (let i in dadosObjeto) {
        if (dadosObjeto[i].tipo != 'Sem Cadastro') {
          tableEquipment.innerHTML += "<tr><td>" + dadosObjeto[i].sti_id + "</td><td>" + dadosObjeto[i].descricao + "</td><td>" + dadosObjeto[i].ip + "</td><td>" + dadosObjeto[i].tipo + "</td><td>" + dadosObjeto[i].nomeCompleto + "</td><td>" + dadosObjeto[i].secao + "</td></tr>";
        } else {
          tableEquipmentNaoCadastrado.innerHTML += "<tr><td>" + dadosObjeto[i].sti_id + "</td><td>" + dadosObjeto[i].descricao + "</td><td>" + dadosObjeto[i].ip + "</td><td>" + dadosObjeto[i].tipo + "</td><td>" + dadosObjeto[i].nomeCompleto + "</td><td><button id='cadastrar' class='text-bg-success' onclick='cadastrarEquip(" + JSON.stringify(dadosObjeto[i]) + ")' style='padding: 5px;border-radius:6px;'>Cadastrar</button></td></tr>";
        }
      }
    }

    function displayEquipments() {
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "php/consultas.php", true);
      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4) {
          if (xhr.status === 200) {
            // tableEquipment.innerHTML += xhr.responseText;
            unParse(xhr.responseText);

          } else {
            tableEquipment.innerHTML += "Falha ao carregar os equipamentos";
          }
        }
      };
      xhr.send("select_ready_equipment=" + encodeURIComponent(1));

    } 
  </script>
</body>

</html>